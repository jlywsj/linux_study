# VI  /  VIM编辑器

> 编辑器之神

### 1. VI VIM是什么

VI 是Unix操作系统和类Unix操作系统汇总最通用的文本编辑器

VIM编辑器是从VI发展出来的一个性能更强大的文本编辑器。可以主动的以字体颜色辨别语法的正确性，方便程序设计。VIM与VI编辑器完全兼容

### 2. 测试数据准备

1. ​	拷贝`/etc/.profile`数据到`/root`目录下

   ```shell
   cp /etc/profile  /root
   cd /root/
   ```

### 3. 一般模式

​	以vi打开一个档案就直接进入一般模式了（这是默认的模式）。在这个模式中，你可以使用【上下左右】按键来移动光标，你可以使用【删除字符】或【删除整行】来处理档案内容，也可以使用【复制、粘贴】来处理你的文件数据。

### 4. 模式间转换

<hr>[参考至尚硅谷linux视频]

![image-20221127105815073](E:\Linu_Study\images\image-20221127105815073.png)

1. 在一般模式下主要操作是删除复制粘贴点击 i 、a或者 o 进入编辑模式；点击 ： 或者 / 进入命令模式
2. 在编辑模式下主要操作是编辑文本：点击esc返回一般模式
3. 在命令模式下主要操作是输入指令如 :wq 保存并退出，:q退出，:set (no)nu显示行号等，点击esc返回一般模式【可以认为是一般模式下的命令操作】

> 使用o进如插入模式时，会在当前光标的下面插入一个空行，进行编辑

命令：

- w 保存，把内存中缓冲区的内容写入硬盘
- u 回退，回退上一次保存的状态
- q 退出，退出到命令行控制台

1) 一般模式下的常用语法

   | 语法     | 功能描述                                      |
   | -------- | :-------------------------------------------- |
   | $        | 光标移动到行尾                                |
   | 0        | 光标移动到行首                                |
   | ^        | 光标移动到当前行的第一个非空字符              |
   | w        | 光标移动到下一个词（词头位置）                |
   | e        | 移动到当前词尾                                |
   | 3h       | 左移三个字符                                  |
   | 3w       | 右移3个单词                                   |
   | h j k l  | 左 下 上 右                                   |
   | 数字n+G  | 移动光标到当前文件的第n行                     |
   | :n       | 移动光标到当前文件的第n行，在尾行模式下执行的 |
   | gg或 :0  | 移动光标到当前文件的第一行                    |
   | GG或 :$  | 移动光标到当前文件的最后一行                  |
   | ctrl+f   | 向下（前）滚动一页                            |
   | ctrl+b   | 向上（后）滚动一页                            |
   | ctrl+u   | 向前滚动半页                                  |
   | ctrl+d   | 向后滚动半页                                  |
   | yy       | 复制光标当前一行                              |
   | 数字 yy  | 复制一段（从光标当前行到后n行包含当前行）     |
   | y^       | 复制从当前行头到当前光标                      |
   | y$       | 复制从当前光标位置到该行结束                  |
   | p        | 箭头移动到目的行粘贴（粘贴至当前行的下面）    |
   | u        | 撤销上一步                                    |
   | dd       | 删除光标当前行                                |
   | d 数字 d | 删除光标（含）后多少行                        |
   | x        | 剪切一个字符（当前光标【后面】），            |
   | X        | 剪切一个字符（当前光标的前一个【前面】）      |
   | yw       | 复制一个词                                    |
   | dw       | 删除一个词                                    |
   | r + 字符 | 替换光标处字符                                |
   | R        | 替换模式，依次输入替换后面字符                |

2) ​	命令模式的基本语法

   | 命令          | 功能                                  |
   | ------------- | ------------------------------------- |
   | :w            | 保存                                  |
   | :q            | 退出                                  |
   | :wq           | 保存并退出                            |
   | :q!           | 不保存强制退出                        |
   | /要查找的词   | n 查找下一个，N往上查找               |
   | :noh          | 取消高亮显示                          |
   | :set (no)nu   | 显示（关闭）行号                      |
   | :s/old/new    | 替换当前行匹配到的第一个old为new      |
   | :s/old/new/g  | 替换当前行匹配到的所有old为new        |
   | :%s/old/new   | 替换文档中每行 匹配到的第一个old为new |
   | :%s/old/new/g | 替换文档中匹配倒的所有的old为new      |

   ![vi-vim-cheat-sheet-sch1](E:\Linu_Study\images\vi-vim-cheat-sheet-sch1.gif)